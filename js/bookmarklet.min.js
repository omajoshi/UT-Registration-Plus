css_inject='.modal{display:none;position:fixed;z-index:1;padding-top:75px;left:0;top:0;width:100%;height:100%;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{background-color:#fefefe;margin:auto;max-height:85%;overflow-y:auto;padding:20px;border:1px solid #888;width:50%}.loader{border:10px solid #f3f3f3;border-top:10px solid #ff9800;border-radius:50%;width:50px;height:50px;display:none;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.close{color:#aaa;float:right;padding:5px;font-size:28px;font-weight:700}.title{font-size:x-large;font-weight:700;padding-top:5px;line-height:1;padding-left:5px;margin:5px 0 5px 0}.distButton{vertical-align:bottom}.description{padding:5px;font-size:15px;font-weight:400}.chartloader{position:absolute;margin-left:auto;margin-right:auto;margin-top:50px;left:0;right:0}.profname{margin-left:5px;padding-bottom:5px;font-size:medium;margin-top:5px}.dateTimePlace{margin-left:5px;margin-bottom:0;margin-top:0;font-size:smaller;font-weight:700}#chartcontainer{max-width:100%;height:250px}#chart{min-width:auto;max-width:100%;height:250px;margin:0 auto;z-index:1}.card{transition:.3s;margin-bottom:10px;box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.card:hover{box-shadow:0 4px 10px 0 rgba(0,0,0,.2),0 4px 20px 0 rgba(0,0,0,.19)}.cardcontainer{padding:2px 16px;transition:width .3s ease-in-out,height .3s ease-in-out}.description{padding:10px}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}.topbuttons .material-button{display:inline-block}.material-button{border:none;outline:0;cursor:pointer;color:#fff;margin:10px 10px 10px 0;padding:10px 10px;border-radius:10px;font-size:medium;font-style:bold;box-shadow:2px 2px 4px rgba(0,0,0,.4);background:#ff9800;position:relative;overflow:hidden}.material-button:after{content:"";position:absolute;top:50%;left:50%;width:5px;height:5px;background:rgba(255,255,255,.5);opacity:0;border-radius:100%;transform:scale(1,1) translate(-50%);transform-origin:50% 50%}@keyframes ripple{0%{transform:scale(0,0);opacity:1}15%{transform:scale(25,25);opacity:1}100%{opacity:0;transform:scale(40,40)}}.material-button:focus:not(:active)::after{animation:ripple 1s ease-out}#snackbar{visibility:hidden;min-width:250px;margin-left:-200px;background-color:#333;color:#fff;border-radius:2px;padding:16px;position:fixed;z-index:1;left:50%;bottom:30px}.descriptionli{padding:0 5px 5px 5px}#snackbar.show{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}#semesters{padding:5px;margin-right:10px;margin-top:10px}#semesters:focus{outline:0}.tooltip{position:relative}.tooltip .tooltiptext{visibility:hidden;background-color:#000;background:rgba(1,1,1,.5);color:#fff;text-align:left;border-radius:6px;font-size:10px;max-width:100px;margin-left:5px;padding:5px 10px;z-index:2;position:absolute}.tooltip:hover .tooltiptext{visibility:visible}@-webkit-keyframes fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@-webkit-keyframes fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}@keyframes fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}';var styleSheet=document.createElement("style");styleSheet.innerText=css_inject,document.head.appendChild(styleSheet);const days=new Map([["M","Monday"],["T","Tuesday"],["W","Wednesday"],["TH","Thursday"],["F","Friday"]]);function getStatusColor(t,e=!1){let n="black";return n=t.includes("open")?e?Colors.open_light:Colors.open:t.includes("waitlisted")?e?Colors.waitlisted_light:Colors.waitlisted:t.includes("closed")||t.includes("cancelled")?e?Colors.closed_light:Colors.closed:e?Colors.no_status_light:Colors.no_status}function buildQuery(t,e){let n=e?"select * from grades":"select * from agg";return n+=" where dept like '%"+t.department+"%'",n+=" and prof like '%"+t.prof_name.replace(/'/g,"")+"%'",n+=" and course_nbr like '%"+t.number+"%'",e&&(n+="and sem like '%"+e+"%'"),n+"order by a1+a2+a3+b1+b2+b3+c1+c2+c3+d1+d2+d3+f desc"}function Course(t,e,n,i,a,o,s){this.coursename=t,this.unique=e,this.profname=n,this.datetimearr=i,this.status=a,this.link=o,this.registerlink=s}function capitalizeString(t){let e="";words=t.split(/[. ,\/ -]/);for(let t in words)word=words[t],capitalizedWord=word.charAt(0).toUpperCase()+word.slice(1).toLowerCase(),e+=capitalizedWord+" ";return e.trim()}function separateCourseNameParts(t){let e=t.search(/\d/);return department=t.substring(0,e).trim(),number=t.substring(e,t.indexOf(" ",e)).trim(),{name:t=capitalizeString(t.substring(t.indexOf(" ",e)).trim()),department:department,number:number}}function separateDays(t,e=!1){let n=[];for(var i=0;i<t.length;i++){let a=t.charAt(i);"T"==a&&i<t.length-1&&"H"==t.charAt(i+1)?n.push(e?"TH":days.get("TH")):"H"!=a&&n.push(e?a:days.get(a))}return n}function convertTime(t){for(var e=t.replace(/\./g,"").split("-"),n=0;n<2;n++)e[n]=moment(e[n],["h:mm A"]).format("HH:mm");return e}function prettifyDaysText(t){var e="";if(t.length>2)for(var n=0;n<t.length;n++)n<t.length-1&&(e+=t[n]+", "),n==t.length-2&&(e+="and "),n==t.length-1&&(e+=t[n]);else e=2==t.length?t[0]+" and "+t[1]:t[0];return e}function isIndividualCoursePage(){return 0!=$("#textbook_button").length}function htmlToNode(t){return $("<div/>").html(t).contents()}function semesterSort(t,e){let n={Spring:0,Fall:1,Summer:2,Winter:3},i=t.split(" ")[0],a=parseInt(t.split(" ")[1]),o=e.split(" ")[0],s=parseInt(e.split(" ")[1]);return a<s?-1:a>s?1:n[i]<n[o]?-1:n[i]>n[o]?1:0}function convertDateTimeArrToLine(t){var e=[];console.log(t);var n=makeDateTimeMap(t),i=Array.from(n.keys()),a=Array.from(n.values());console.log(i),console.log(a);for(var o=0;o<a.length;o++){var s=findLocation(a[o],i[o],t),r=s.substring(0,s.search(/\d/)).trim();r=r||"Undecided Location",e.push({days:a[o],start_time:i[o].split(",")[0],end_time:i[o].split(",")[1],location_link:`https://maps.utexas.edu/buildings/UTM/${r}`,location_full:s})}return e}function makeDateTimeMap(t){for(var e=new Map([]),n=0;n<t.length;n++)t[n][1][0]=moment(t[n][1][0],["HH:mm A"]).format("h:mm A"),t[n][1][1]=moment(t[n][1][1],["HH:mm A"]).format("h:mm A");for(n=0;n<t.length;n++)e.has(String(t[n][1]))?e.set(String(t[n][1]),e.get(String(t[n][1]))+t[n][0]):e.set(String(t[n][1]),t[n][0]);return e}function findLocation(t,e,n){for(let a=0;a<n.length;a++){var i=n[a];if(t.includes(i[0])&&JSON.stringify(e)==JSON.stringify(reformatDateTime(i[1])))return i[2]}}function validateCourses(t){for(var e=0;e<t.length;e++)if(!validateCourseObject(t[e]))return!1;return!0}function validateCourseObject(t){var e=!0,n=["coursename","datetimearr","link","profname","status","unique"];for(let i=0;i<n.length;i++)e&=t.hasOwnProperty(n[i]);return e}function reformatDateTime(t){let e="";for(let n=0;n<t.length;n++)e+=t[n],n!=t.length-1&&(e+=",");return e}function rgb2hex(t){function e(t){return("0"+parseInt(t).toString(16)).slice(-2)}return"#"+e((t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+e(t[2])+e(t[3])}function buildChartConfig(t){return{chart:{type:"column",backgroundColor:" #fefefe",spacingLeft:10},title:{text:null},subtitle:{text:null},legend:{enabled:!1},xAxis:{title:{text:"Grades"},categories:["A","A-","B+","B","B-","C+","C","C-","D+","D","D-","F"],crosshair:!0},yAxis:{min:0,title:{text:"Students"}},credits:{enabled:!1},lang:{noData:"The professor hasn't taught this class :("},tooltip:{headerFormat:'<span style="font-size:small; font-weight:bold">{point.key}</span><table>',pointFormat:'<td style="color:{black};padding:0;font-size:small; font-weight:bold;"><b>{point.y:.0f} Students</b></td>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{bar:{pointPadding:.2,borderWidth:0},series:{animation:{duration:700}}},series:[{name:"Grades",data:[{y:t[6],color:"#4CAF50"},{y:t[7],color:"#8BC34A"},{y:t[8],color:"#CDDC39"},{y:t[9],color:"#FFEB3B"},{y:t[10],color:"#FFC107"},{y:t[11],color:"#FFA000"},{y:t[12],color:"#F57C00"},{y:t[13],color:"#FF5722"},{y:t[14],color:"#FF5252"},{y:t[15],color:"#E64A19"},{y:t[16],color:"#F44336"},{y:t[17],color:"#D32F2F"}]}]}}function canNotRegister(t,e){return t.includes("closed")||t.includes("cancelled")||!t||!e}class Timing{}Timing.fade_time=100,Timing.button_delay=75;class Template{}Template.Main=class{static modal(){return'<div class=modal id=myModal>\n                    <div class=modal-content>\n                    <span class=close>Ã—</span>\n                    <div class=card>\n                            <div class=cardcontainer>\n                            <h2 class=title id="title">Computer Fluency (C S 302)</h2>\n                            <h2 class=profname id="profname">with <a id="professor_link">Bruce Porter</a></h2>\n                            <div id="topbuttons" class=topbuttons>\n                                    <button class=material-button id="rateMyProf" style="background: #4CAF50;"> RMP </button>\n                                    <button class=material-button id="eCIS" style="background: #CDDC39;"> eCIS </button>\n                                    <button class=material-button id="textbook" style="background: #FFC107;"> Textbook </button>\n                                    <button class=material-button id="Syllabi"> Past Syllabi </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=card>\n                            <div class=cardcontainer style="">\n                                <div class="chartloader">\n                                    <div class="loader" id=\'descload\'></div>\n                                </div>\n                                <ul class=description id="description" style="list-style-type:disc"></ul>\n                            </div>\n                        </div>\n                        <div class=card style=\'text-align:center\'>\n                            <select id="semesters" style=\'text-align-last:center;color:#666666;fill:#666666;\'>\n                            </select>\n                            <div class="chartloader">\n                                <div class="loader" id=\'chartload\'></div>\n                            </div>\n                            <div id="chartcontainer" class=cardcontainer>\n                                <div id=chart></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>'}static extension_button(){return'<td data-th="Plus"><input type="image" class="distButton" id="distButton" width="20" height="20" src=\'https://iqt.txfa.org/static/iqt/pencil-small.png\'/></td>'}},Template.Catalog=class{static loading(){return'<div style="text-align:center">\n                        <div class="loader" id=\'loader\'></div>\n                        <br>\n                        <h1 id="nextlabel"style="color: #FF9800;display:none;">Loading Courses</h1>\n                        <h1 id="retrylabel"style="color: #F44336;display:none;">Failed to Load Courses</h1>\n                        <br>\n                        <button class=material-button id="retry" style="background: #F44336;display:none;">Retry</button>\n                </div>'}},console.log(`UT Registration Plus is running on this page: ${window.location.href}`);var curr_course={},semester_code=new URL(window.location.href).pathname.split("/")[4],done_loading=!0,next=$("#next_nav_link");if(document.querySelector("#fos_fl")){let t=new URL(document.location).searchParams,e=t.get("fos_fl"),n=t.get("level");e&&n&&(3!=e.length||"U"!=n&&"L"!=n&&"G"!=n||(document.querySelector("#fos_fl").value=e,document.querySelector("#level").value=n))}function updateLinks(t,e){let{prof_name:n,number:i}=t;t.first_name=e,t.links.rate_my_prof=`http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=university+of+texas+at+austin&queryoption=HEADER&query=${e} ${n};&facetSearch=true`,t.links.ecis=profname?`http://utdirect.utexas.edu/ctl/ecis/results/index.WBX?&s_in_action_sw=S&s_in_search_type_sw=N&s_in_search_name=${n}%2C%20${e}`:`http://utdirect.utexas.edu/ctl/ecis/results/index.WBX?s_in_action_sw=S&s_in_search_type_sw=C&s_in_max_nbr_return=10&s_in_search_course_dept=${department}&s_in_search_course_num=${i}`}function buildCourseLinks(t){let{department:e,number:n,unique:i,prof_name:a}=t;return links={textbook:`https://www.universitycoop.com/adoption-search-results?sn=${semester_code}__${e}__${n}__${i}`,syllabi:`https://utdirect.utexas.edu/apps/student/coursedocs/nlogon/?year=&semester=&department=${e}&course_number=${n}&course_title=&unique=&instructor_first=&instructor_last=${a}&course_type=In+Residence&search=Search`,rate_my_prof:"http://www.ratemyprofessors.com/campusRatings.jsp?sid=1255",ecis:"http://utdirect.utexas.edu/ctl/ecis/results/index.WBX?"},t.links=links,t}function buildBasicCourseInfo(t,e,n){let{name:i,department:a,number:o}=separateCourseNameParts(e),s=$(t).find('td[data-th="Instructor"]').text(),r=s.indexOf(",")>0;return course_info={full_name:e,name:i,department:a,number:o,individual:n||$(t).find('td[data-th="Unique"] a').prop("href"),register:$(t).find('td[data-th="Add"] a').prop("href"),unique:$(t).find('td[data-th="Unique"]').text(),status:$(t).find('td[data-th="Status"]').text(),prof_name:s?capitalizeString(r?s.split(", ")[0]:s):"Undecided",initial:s&&r?s.split(", ")[1].substring(0,1):"",time_data:{days:$(t).find('td[data-th="Days"]>span').toArray().map(t=>$(t).text().trim()),times:$(t).find('td[data-th="Hour"]>span').toArray().map(t=>$(t).text().trim()),places:$(t).find('td[data-th="Room"]>span').toArray().map(t=>$(t).text().trim())},links:{}},buildCourseLinks(course_info)}function getCourseInfo(t){let e="",n={},i=void 0;return isIndividualCoursePage()?(e=$("#details h2").text(),n=$("table"),i=document.URL):$("table").find("tr").each(function(){if($(this).find("td").hasClass("course_header")&&(e=$(this).find("td").text()+""),$(this).is(t))return n=t,!1}),getDescription(curr_course=buildBasicCourseInfo(n,e,i)),curr_course}function getDayTimeArray(t,e){var n=[];let i=e?e.time_data.days:$(t).find('td[data-th="Days"]>span').toArray().map(t=>$(t).text().trim()),a=e?e.time_data.times:$(t).find('td[data-th="Hour"]>span').toArray().map(t=>$(t).text().trim()),o=e?e.time_data.places:$(t).find('td[data-th="Room"]>span').toArray().map(t=>$(t).text().trim());for(var s=0;s<i.length;s++){let t=i[s],e=a[s],l=o[s];for(var r=0;r<t.length;r++){let i=t.charAt(r);"T"==i&&r<t.length-1&&"H"==t.charAt(r+1)?n.push(["TH",convertTime(e),l]):"H"!=i&&n.push([i,convertTime(e),l])}}return n}function convertDateTimeArrToLine(t,e,n){let i=prettifyDaysText(separateDays(t)),a=n.substring(0,n.search(/\d/)-1);return a=a||"Undecided Location",`${i} at ${e.replace(/\./g,"").replace(/\-/g," to ")} in <a style='font-size:medium' target='_blank' href='https://maps.utexas.edu/buildings/UTM/${a}'>${a}</>`}function badData(t,e){return void 0===e||"Undecided"==t.prof_name}function getDistribution(t){toggleChartLoading(!0),openDialog(t)}function buildTitle(t){return`${t.name} (${t.department} ${t.number})`}function buildTimeTitle(t){$("h2.dateTimePlace").remove();let{days:e,times:n,places:i}=t.time_data;var a=[];for(let t=0;t<e.length;t++){var o=e[t],s=n[t],r=i[t];a.push($(`<h2 class="dateTimePlace">${convertDateTimeArrToLine(o,s,r)}</th>`))}return a}function buildProfTitle(t){const{initial:e,prof_name:n}=t;return`with ${e?e+". ":""}${n}`}function buildSemestersDropdown(t,e){if($("#semesters").empty(),badData(t,e))$("#semesters").append("<option>No Data</option>");else{var n=e.values[0][18].split(",");n.sort(semesterSort),n.reverse().unshift("Aggregate");for(var i=[],a=0;a<n.length;a++)i.push($(`<option value="${n[a]}">${n[a]}</option>`));$("#semesters").append(i)}}function displayBasicCourseInfo(t){$("#title").text(buildTitle(t)),$("#topbuttons").before(buildTimeTitle(t)),$("#profname").text(buildProfTitle(t)),$("#myModal").show(),console.log(t)}function openDialog(t){displayBasicCourseInfo(t),allowClosing()}$("#kw_results_table").length||($("table").after(Template.Catalog.loading()),$("#container").prepend(Template.Main.modal()),$("#myModal").prepend("<div id='snackbar'>save course popup...</div>"),$("table thead th:last-child").after("<th scope=col>Plus</th>"),$("table").find("tr").each(function(){$(this).find("td").hasClass("course_header")||0!=$(this).has("th").length||$(this).append(Template.Main.extension_button())})),isIndividualCoursePage()&&$("#distButton").click(),$("body").on("click","#distButton",function(){var t=$(this).closest("tr");$(".modal-content").stop().animate({scrollTop:0},500),$(this).blur(),getDistribution(curr_course=getCourseInfo(t))});var error_message="<p style='color:red;font-style:bold'>You have been logged out. Please refresh the page and log back in using your UT EID and password.</p>";function buildFormattedDescription(t){let e="";for(let n in t){let i=t[n];e+=i=0==i.indexOf("Prerequisite")?`<li style='font-weight: bold;' class='descriptionli'>${i}</li>`:i.indexOf("May be")>=0?`<li style='font-style: italic;' class='descriptionli'>${i}</li>`:0==i.indexOf("Restricted to")?`<li style='color:red;' class='descriptionli'>${i}</li>`:`<li class='descriptionli'>${i}</li>`}return e||(e=error_message),e}function extractFirstName(t){let e=t.find('td[data-th="Instructor"]').text().split(", "),n=e[e.length-1];return capitalizeString(n=n.indexOf(" ")>0?n.split(" ")[0]:n)}function displayDescription(t){toggleDescriptionLoading(!1),$("#description").animate({opacity:0},200,function(){$(this).html(t).animate({opacity:1},200)})}function getDescription(t){toggleDescriptionLoading(!0),$.ajax({url:t.individual,success:function(e){if(e){let n=htmlToNode(e);description_lines=n.find("#details > p").toArray().map(t=>$(t).text()),displayDescription(buildFormattedDescription(description_lines));let i=extractFirstName(n);updateLinks(t,i)}else displayDescription(error_message)}})}function loadNextPages(t){if(void 0===t&&(t=1),0==t)return;let e=next.prop("href");done_loading&&next&&e&&(toggleLoadingPage(!0),$.get(e,function(e){if(e){var n=htmlToNode(e),i=$("tbody"),a=($("tbody tr").length,i.find(".course_header>h2:last").text());next=n.find("#next_nav_link"),toggleLoadingPage(!1);var o=[];n.find("tbody>tr").each(function(){let t=$(this).find("td").hasClass("course_header");t&&0==$(this).has("th").length||$(this).append(Template.Main.extension_button()),t&&a==$(this).find("td").text()||o.push($(this))}),i.append(o)}loadNextPages(t-1)}).fail(function(){toggleLoadingPage(!1),$("#retrylabel").css("display","inline-block"),$("#retry").css("display","inline-block")}))}function toggleLoadingPage(t){t?(done_loading=!1,$("#loader").css("display","inline-block"),$("#nextlabel").css("display","inline-block")):(done_loading=!0,$("#loader").hide(),$("#nextlabel").hide())}function toggleChartLoading(t){t?($("#chartload").css("display","inline-block"),$("#chart").hide()):($("#chartload").hide(),$("#chart").show())}function toggleDescriptionLoading(t){t?$("#descload").css("display","inline-block"):$("#descload").hide()}function toggleSnackbar(){setTimeout(function(){$("#snackbar").attr("class","show")},200),setTimeout(function(){$("#snackbar").attr("class","")},3e3)}function allowClosing(){$(".close").click(function(){close()}),$("#myModal").click(function(t){"myModal"==t.target.id&&close()})}function close(){$("#myModal").hide(),$("#snackbar").attr("class","")}$("#Syllabi").click(function(){setTimeout(function(){window.open(curr_course.links.syllabi)},Timing.button_delay)}),$("#rateMyProf").click(function(){setTimeout(function(){window.open(curr_course.links.rate_my_prof)},Timing.button_delay)}),$("#eCIS").click(function(){setTimeout(function(){window.open(curr_course.links.ecis)},Timing.button_delay)}),$("#textbook").click(function(){setTimeout(function(){window.open(curr_course.links.textbook)},Timing.button_delay)}),$("#retry").click(function(){$("#retrylabel").hide(),$(this).hide(),loadNextPages()}),$(document).keydown(function(t){27==t.keyCode&&close()}),$(window).scroll(function(){$(document).height()<=$(window).scrollTop()+$(window).height()+150&&loadNextPages()}),$(window).on("load",function(){loadNextPages(3)});